<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  
<mapper namespace="ScheduleBBS">

	<!-- 비로그인 유저 -->
	<!-- 1. Schedule BBS (시작날짜 <>= SYSDATE 조건 -> SYSDATE기준 시작날짜가 임박한 데이터 // 현재날짜에 가까운 순 정렬) -->
    <select id="getComingSchedule" resultType="kh.com.a.model.ScheduleBBSDto">
		SELECT * FROM SCHEDULEBBS WHERE SYSDATE 
							<![CDATA[ < ]]> SDATE ORDER BY SDATE ASC
	</select> 
	
	 
	<!-- 비로그인 유저 --> 
	<!-- 2. Schedule BBS (종료날짜 <>= SYSDATE 조건 -> SYSDATE기준 시작날짜가 초과했지만 종료날짜가 지나지 않은 데이터 // 종료임박 데이터 순 정렬) -->
	<select id="getIngSchedule" resultType="kh.com.a.model.ScheduleBBSDto">
		SELECT * FROM SCHEDULEBBS WHERE SYSDATE 
					<![CDATA[ < ]]> SDATE OR SYSDATE > SDATE AND SYSDATE > EDATE ORDER BY SDATE ASC
	</select>   
	
	<!-- 회원 유저 -->
	<!-- 3.  -->
	<!-- 회원 유저 -->
	
	<insert id="writeBBs" parameterType="kh.com.a.model.ScheduleBBSDto">
			INSERT INTO SCHEDULEBBS(SDATE, EDATE, LOCATION, PLACE, COUNT, PRICE, SCHEDULE_SEQ)
			VALUES(#{sdate}, #{edate}, #{location}, #{place}, #{count}, #{price}, SCHEDULE_SEQ.NEXTVAL)
	 </insert> 
	
	<select id="getScheduleList" resultType="kh.com.a.model.ScheduleBBSDto">
		SELECT SDATE, EDATE, LOCATION, PLACE, COUNT, PRICE, SCHEDULE_SEQ 
		FROM SCHEDULEBBS
		ORDER BY SDATE 
	</select>
	
	
</mapper>